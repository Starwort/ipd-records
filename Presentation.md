# FairShare
### A household sharing application

---

## What is FairShare?

<small>


- FairShare is an application for facilitating the fair sharing of communal goods.
- Participating members of the household join a group on the application, where they can buy from, or sell to, the communal pot.
- When it is time for a member to leave, or when the users wish to even up the debts, each member's balance can be checked and reset at once; the users will exchange money according to their spending.

</small>

---

## Product backlog

### Sprint 1

<small>
<table>
  <thead>
    <tr>
      <th>Title</th>
      <th>Story</th>
      <th>Task</th>
      <th>Owner</th>
      <th>Acceptance Criteria</th>
      <th>Progress</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td rowspan=3>Design</td>
      <td rowspan=3>As a user, I want to see the layout of the site.</td>
      <td>Create a site map to show the pages that will be on the site as well as how the user will navigate through them.</td>
      <td>Ben</td>
      <td>Showcase a site map including a way to sign in, select a group, add an item to a group's inventory, and buy an item from a group's inventory.</td>
      <td>Done</td>
    </tr>
    <tr>
      <!-- -->
      <!-- -->
      <td>Model UI using Figma</td>
      <td>Toby</td>
      <td>Demo site flow.</td>
      <td>Done</td>
    </tr>
    <tr>
      <!-- -->
      <!-- -->
      <td>Design DB Schema</td>
      <td>Albany</td>
      <td>Showcase database model containing interactions between Users, Items, Utilities, Resources, Transactions, and Groups.</td>
      <td>Done</td>
  </tbody>
</table>
</small>

---

## Product Backlog

### Sprint 2


<small><small>
<table>
  <thead>
    <tr>
      <th>Title</th>
      <th>Story</th>
      <th>Task</th>
      <th>Owner</th>
      <th>Acceptance Criteria</th>
      <th>Progress</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td rowspan=7>Login/Sign Up</td>
      <td rowspan=7>As a user I want to be able to log into the system so that I can see my list of groups.</td>
      <td>Flutter implementation of login page.</td>
      <td rowspan=2>Jacob</td>
      <td>If I enter a username and a password then I should be taken to a home page.</td>
      <td>Done</td>
    </tr>
    <tr>
      <td>Flutter implementation of sign up page.</td>
      <td>If I enter a username, a password, a matching password, an email, and a phone number, then I should be taken to a home page.</td>
      <td>Done</td>
    </tr>
    <tr>
      <td>Database design</td>
      <td rowspan=2>Albany</td>
      <td>Showcase design model with user data, group data, transaction data, and object data.</td>
      <td>Done</td>
    </tr>
    <tr>
      <td>Database user account implementation</td>
      <td>Database demo</td>
      <td>Done</td>
    </tr>
    <tr>
      <td>Back-end user data API Design</td>
      <td rowspan=2>Toby</td>
      <td>API demo</td>
      <td>Done</td>
    </tr>
    <tr>
      <td>Back-end user data API Implementation</td>
      <td>Code sample - show route definition for at least one route</td>
      <td>In Progress</td>
    </tr>
    <tr>
      <td>API integration between front-end and back-end</td>
      <td>Ben</td>
      <td>Code sample. Test account creation/login. Only go to home page if valid.</td>
      <td>In Progress</td>
    </tr>
    <tr>
      <td>App-wide</td>
      <td>As a user I want an inviting theme that I can instantly recognise.</td>
      <td>Create 2-3 design palettes</td>
      <td>Aiko</td>
      <td>Collect feedback from presentation.</td>
      <td>Created, awaiting feedback</td>
    </tr>
  </tbody>
</table>
</small></small>

---

## Product Backlog

### Future

<small><small>
<table>
  <thead>
    <tr>
      <th>Title</th>
      <th>Story</th>
      <th>Task</th>
      <th>Owner</th>
      <th>Acceptance Criteria</th>
      <th>Progress</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Add Item</td>
      <td>As a user I would like to be able to add an item to the inventory. (Ignore monetary transactions for now)</td>
      <td>[tasks]</td>
      <td>[owners]</td>
      <td>[acceptance]</td>
      <td>Not Started</td>
    </tr>
    <tr>
      <td>Buy Item</td>
      <td>As a user I would like to be able to buy an item from the inventory. (Ignore monetary transaction for now)</td>
      <td>[tasks]</td>
      <td>[owners]</td>
      <td>[acceptance]</td>
      <td>Not Started</td>
    </tr>
    <tr>
      <td>Transactions</td>
      <td>As a user I would like my in-app balance to modify when I add or buy/use an item.</td>
      <td>[tasks]</td>
      <td>[owners]</td>
      <td>[acceptance]</td>
      <td>Not Started</td>
    </tr>
    <tr>
      <td>Group Invites</td>
      <td>As a user I would like to be able to add my housemates to my group.</td>
      <td>[tasks]</td>
      <td>[owners]</td>
      <td>[acceptance]</td>
      <td>Not Started</td>
    </tr>
    <tr>
      <td>New Group</td>
      <td>As a user i would like to be able to create a new group.</td>
      <td>[tasks]</td>
      <td>[owners]</td>
      <td>[acceptance]</td>
      <td>Not Started</td>
    </tr>
    <tr>
      <td>Group Switch</td>
      <td>As a user I would like to be switch between multiple groups.</td>
      <td>[tasks]</td>
      <td>[owners]</td>
      <td>[acceptance]</td>
      <td>Not Started</td>
    </tr>
    <tr>
      <td>Statements</td>
      <td>As the admin of a group, I would like to be able to see all of the transactions for my group.</td>
      <td>[tasks]</td>
      <td>[owners]</td>
      <td>[acceptance]</td>
      <td>Not Started</td>
    </tr>
    <tr>
      <td>Templates</td>
      <td>As a user I would like to be able to create and use buy/sell templates for regular transaction combinations.</td>
      <td>[tasks]</td>
      <td>[owners]</td>
      <td>[acceptance]</td>
      <td>Not Started</td>
    </tr>
  </tbody>
</table>
</small></small>

---

## Task breakdown

<small><small>
<table>
  <thead>
    <tr>
      <th>Title</th>
      <th>Story</th>
      <th>Task</th>
      <th>Owner</th>
      <th>Acceptance Criteria</th>
      <th>Progress</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td rowspan=7>Login/Sign Up</td>
      <td rowspan=7>As a user I want to be able to log into the system so that I can see my list of groups.</td>
      <td>Flutter implementation of login page.</td>
      <td rowspan=2>Jacob</td>
      <td>If I enter a username and a password then I should be taken to a home page.</td>
      <td>Done</td>
    </tr>
    <tr>
      <td>Flutter implementation of sign up page.</td>
      <td>If I enter a username, a password, a matching password, an email, and a phone number, then I should be taken to a home page.</td>
      <td>Done</td>
    </tr>
    <tr>
      <td>Database design</td>
      <td rowspan=2>Albany</td>
      <td>Showcase design model with user data, group data, transaction data, and object data.</td>
      <td>Done</td>
    </tr>
    <tr>
      <td>Database user account implementation</td>
      <td>Database demo</td>
      <td>Done</td>
    </tr>
    <tr>
      <td>Back-end user data API Design</td>
      <td rowspan=2>Toby</td>
      <td>API demo</td>
      <td>Done</td>
    </tr>
    <tr>
      <td>Back-end user data API Implementation</td>
      <td>Code sample - show route definition for at least one route</td>
      <td>In Progress</td>
    </tr>
    <tr>
      <td>API integration between front-end and back-end</td>
      <td>Ben</td>
      <td>Code sample. Test account creation/login. Only go to home page if valid.</td>
      <td>In Progress</td>
    </tr>
    <tr>
      <td>App-wide</td>
      <td>As a user I want an inviting theme that I can instantly recognise.</td>
      <td>Create 2-3 design palettes</td>
      <td>Aiko</td>
      <td>Collect feedback from presentation.</td>
      <td>Created, awaiting feedback</td>
    </tr>
  </tbody>
</table>
</small></small>

---

## User stories

> As a user I want to be able to log into the system so that I can see my list of groups.
- Most tasks were based on this user story.

> As a user I want an inviting theme that I can instantly recognise.
- One task was based on this user story.

---

## Jacob's tasks

<small>

- Task: Flutter implementation of the login page.
    - Acceptance criterion: If I enter a username and a password then I should be taken to a home page.
    - Time expected: 1h
    - Time taken: 30m
- Task: Flutter implementation of the sign up page.
    - Acceptance criterion: If I enter a username, a password, a matching password, an email, and a phone number, then I should be taken to a home page.
    - Time expected: 2h
    - Time taken: 1h

</small>

---

## Albany's tasks

<small>

- Task: Database design
  - Acceptance criterion: Showcase design model with user data, group data, transaction data, and object data.
  - Time expected: 3h
  - Time taken: 2h30m
  - Noâ€‹tes:
    - The database was first designed, then normalised to 3rd normal form.
    - The following slide contains an image of the database diagram
- Task: Database user account implementation
  - Acceptance criterion: Show example scripts (code sample)
  - Time expected: 2h
  - Time taken: 1h30m

</small>

---

![](https://media.discordapp.net/attachments/1042514869213208706/1049687379327340604/image.png)

---

## Albany's tasks
#### Database implementation of user

```rust
#[derive(Insertable)]
#[diesel(table_name = users)]
pub struct NewUser<'a> {
    pub username: &'a str,
    pub pwd_hash: &'a str,
    pub email: &'a str,
    pub mobile: &'a str,
}
```

```rust
let new_user = NewUser {
    username: "user",
    pwd_hash: "password",
    email: "email",
    mobile: "mobile",
};
diesel::insert_into(users).values(&new_user).execute(conn)
```

---

## Toby's tasks

<small>

- Task: Back-end user data API design
    - Acceptance criterion: Showcase API schema for user-data endpoints.
    - Time expected: 3h
    - Time taken: 2h
    - Schema on next slide
- Task: Back-end user data API implementation
    - Acceptance criterion: Code sample - show definition for at least one route.
    - Time expected: 10h
    - Time taken: 5h, ~50% complete

</small>

---

## Toby's tasks
#### API Schema

<small>

- POST `/login`
    - Takes JSON data, `{"username": string, "password": string}`
    - Returns JSON response; `{"token": string}` on success or `{"error_type": string}` on failure
- POST `/signup`
    - Takes JSON data, `{"username": string, "password": string, "email": string, "mobile": string}`
    - Returns JSON reponse; `{"token": string}` on success or `{"error_type": string}` on failure
- POST `/token`
    - Returns JSON data, `{"token": string}` containing a refreshed token, if the request was correctly authenticated.
- PATCH `/me`
    - Takes JSON data, `{"old_password": string, "new_password": string}`
    - If the request was correctly-authenticated and the old password matched, updates the user's password.

</small>

---

## Toby's tasks
#### API routes code sample

<small>

- This is the definition for the `/login` API route.

</small>

```rust
#[post("/login", format = "json", data = "<data>")]
pub async fn login(
    db: Db,
    data: Json<LoginData>,
) -> JsonResult<LoginResult, GenericError> {
    // code omitted here
}
```

---

## Ben's tasks

- Task: API integration between front-end and back-end
    - Acceptance criterion: Code sample, demo with integrated API or mock interfaces.
    - Time expected: 3h
    - Time taken: 2h (not complete)
- Task: Backlog refinement
    - Time expected: 3h
    - Time taken: 2h15m

---

### Template API call functions
```dart
// for 'incorrect password' error (assuming username is good)
bool login_email_ok(String email) {
  return email == "test@example.com";
}

bool login_password_ok(String email, String password) {
  if (!login_email_ok(email)) {
    return false;
  }

  return password == "testpassword";
}
```

---

### Template API call functions

```dart
/// for 'invalid email' error
bool signup_email_ok(String email) {
  if (!email.contains('@')) {
    return false;
  }

  bool email_taken = email != "testemail@email.com";

  return !email_taken;
}
```
```dart
/// for 'passwords do not match' error
bool signup_passwords_match(String pw1, String pw2) {
  return pw1 == pw2;
}
```

---

### Template API call functions

```dart
bool signup_new_user(
  String username,
  String email,
  String pw1,
  String pw2,
) {
  if (
    !signup_email_ok(email)
    || !signup_passwords_match(pw1, pw2)
  ) {
    return false;
  }
  return false; // API call
}
```

---

## Aiko's task

- Task: Create 2-3 design palettes
    - Acceptance criterion: Collect feedback from this presentation.
    - Time expected: 5h
    - Time taken: 3h45m
- Task: Backlog refinement
    - Time expected: 3h
    - Time taken: 2h15m

---

# That's all folks

<div style="position:absolute;width:100%;height:100%;font-size:1vh;opacity:0.1">Send help</div>
